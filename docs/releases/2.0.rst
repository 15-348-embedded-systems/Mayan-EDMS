=============================
Mayan EDMS v2.0 release notes
=============================

Released: September 2015

Welcome to Mayan EDMS v2.0


What's new in Mayan EDMS v2.0
=============================
* Appearance app
* Update to Django 1.7.7
* Update frontend UI to use Bootstrap
* Improved document page navigation interface
* Merge of document_print and document_hard_copy views
* New class based and menu based navigation system
* Menu reorganization
* Repurpose the installtion app
* Removal of Python 2.6 support
* Removal of hardcoded use of the famfam icon set
* Configurable use of Font Awesome icon set
* Merging of apps

  * home and common
  * project_tools, project_setup and common
  * documents and document_acls apps

* Addition of a post document version OCR signal
* Removal dependencies:

  * South
  * GitPython
  * psutil
  * python-hkp
  * sendfile
  * slate

* New document converter
* New class based transformations
* Removal of the DOCUMENT_RESTRICTIONS_OVERRIDE permission
* Use of Font awesome icons
* Move document OCR content code to the OCR app
* Add new permissions PERMISSION_OCR_CONTENT_VIEW
* Removed the page_label field
* OCR submit document views (single & multiple) use confirmation and POST request. Avoids OCR queueing on GET by web spiders.
* Default document type and initial web form source created at initial setup
* OCR settings move to the OCR app
* New YAML based smart settings system
* Complete removal of auto admin creation code to a separate app
* New dependencies:

  * PyYAML
  * django-autoadmin

* Permissions refactor
* ACLs refactor
* Removal of anonymous user supporta
* Removal of default class ACLs
* Refactor of metadata validators
* Management command to remove obsolete permissions
* Simplification of permissions/ACLS and role system
* Removal of the ImageMagick and GraphicsMagick converter backends
* Remove support for applying roles to new users automatically
* Trash can feature
* Retention policies, auto move to trash, auto delete from trash
* New internal document creation workflow, returns document stub while content is processing
* New document ready signal
* Index are recalculating after new document is ready
* Normalization of 'title' and 'name' fields to 'label'
* Split tests files.
* Document image and intermediate file caching now has it's own storage backend.
* RGB tags
* ``performupgrade`` management command.
* Removal of eval from metadata type defaults and lookup fields. Django's own template language is now used instead.
* Support to share an index as a FUSE filesystem.
* Preview images' titles are clickable.

Upgrading from a previous version
=================================

Using PIP
~~~~~~~~~

Type in the console::

    $ pip install mayan-edms==2.0

the requirements will also be updated automatically.

Using Git
~~~~~~~~~

If you installed Mayan EDMS by cloning the Git repository issue the commands::

    $ git reset --hard HEAD
    $ git pull

otherwise download the compressed archived and uncompress it overriding the existing installation.

Next upgrade/add the new requirements::

    $ pip install --upgrade -r requirements.txt

Common steps
~~~~~~~~~~~~

Migrate existing database schema with::

    $ mayan-edms.py performupgrade

During the migration several messages of stale content types can occur:

.. code-block:: bash

    The following content types are stale and need to be deleted:

        XX | XX

    Any objects related to these content types by a foreign key will also
    be deleted. Are you sure you want to delete these content types?
    If you're unsure, answer 'no'.

        Type 'yes' to continue, or 'no' to cancel:


You can safely answer "yes".

Add new static media::

    $ mayan-edms.py collectstatic --noinput

Remove unused dependencies::

    $ pip uninstall South
    $ pip uninstall GitPython
    $ pip uninstall psutil
    $ pip uninstall python-hkp
    $ pip uninstall django-sendfile

The upgrade procedure is now complete.


Backward incompatible changes
=============================

* Document and sources transformations

Bugs fixed or issues closed
===========================

* `issue #33 <https://github.com/mayan-edms/mayan-edms/issues/33>`_ Update to Django 1.7
* `issue #59 <https://github.com/mayan-edms/mayan-edms/issues/59`_ New bootstrap based UI
* `issue #60 <https://github.com/mayan-edms/mayan-edms/issues/60>`_ Backport class based navigation code from the unstable branch
* `issue #62 <https://github.com/mayan-edms/mayan-edms/issues/62>`_ Simplify and reduce code in templates
* `issue #67 <https://github.com/mayan-edms/mayan-edms/issues/67>`_ Python 3 compatibility: Update models __unicode__ methdo to __str__ methods (using Django's six library)
* `issue #121 <https://github.com/mayan-edms/mayan-edms/issues/121>`_ Twitter Bootstrap theme for Mayan EDMS
* `issue #155 <https://github.com/mayan-edms/mayan-edms/issues/155>`_ Header does not fit list on documents/list on small screens (laptop)
* `issue #170 <https://github.com/mayan-edms/mayan-edms/issues/170>`_ Remove use of python-hkp
* `issue #182 <https://github.com/mayan-edms/mayan-edms/issues/182>`_ Reorganize signal processors


.. _PyPI: https://pypi.python.org/pypi/mayan-edms/

