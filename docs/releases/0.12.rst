==============================
Mayan EDMS v0.12 release notes
==============================

*February 2012*

Welcome to Mayan EDMS v0.12!

This release commemorates **Mayan EDMS** first aniversary!

Overview
========

Aside from new features, the focus of this release of **Mayan EDMS** also
been about improving the code quality standard
even further.  The permission system has been completely overhauled to make
it entire class based.  The other big change is the addition of object
level permissions, with this new system being applied to documents,
folder, tags and smart links.  There is also a small batch of navigation
improvements.  Big code cleanup and lots of changes 'under the hood',
most of these are not visible to the end user, but make the code cleaner
and more manageable so that more and better features can be added in future
releases:

* Absolute imports used throught the code
* All app permissions have been move to a separate permissions.py file
  per app
* Complete permission system refactor.
* Document signining code move to it's own app
* Initial unit tests
* A lot of logging used throught the entire project.
* Much functionality moved to model managers.
* A lot of code converted into classes.
* Coding style improvements.
* Template user authentication state logic improvements, for stonger
  prevention against intrusion or unintentional display or access
  of restricted data.
* Removal of remarked code.


What's new in Mayan EDMS v0.12
==============================

ACL support
~~~~~~~~~~~
* Object level access control is now in place for documents, folders,
  tags and smart links.  What this means is that administrators can now
  grant permissions to users, groups or roles on for specific objects.
* Default class ACL support.  Administrators can setup the access control
  lists that new documents, folders and tags will automatically inheric
  when created.  Aside from asigning permission to users, groups and roles
  to specific objects, there is a special user called `Creator`, use to
  allow the access control list that the actual creator of an object will
  inherit. 
  
Anonymous user support
~~~~~~~~~~~~~~~~~~~~~~
Anonymous user support is a two tier function, first is the addition of
the COMMON_ALLOW_ANONYMOUS_ACCESS that allows non authenticated to browse
all the pages of a **Mayan EDMS** installation.  The second part of this
support is the ability to assign permissions or individual access to objects
to anonymous users.

Translations
~~~~~~~~~~~~~~~~~~~
A new Italian translation is available, provided by SeeOpen.IT
(www.seeopen.it, info@seeopen.it) as well as complete Russian translation
update by Сергей Глита.

Usability improvements
~~~~~~~~~~~~~~~~~~~~~~
* Detached signature behavior improved, uploading a new detached signature
  erases the previous one.
* Usability improvement in the role member's add/removal form, by using
  HTML's option groups tag property
  
2 Step download process
~~~~~~~~~~~~~~~~~~~~~~~
The code for downloading single and multiple document and document versions
has been merged with compression support also added.  This allows for the
download of documents in their original format or compressed and well as
the download of several documents in a single compressed file.   

Customizable GPG home directory
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Addition of the SIGNATURES_GPG_HOME configuration option to let 
administrators set **Mayan EDMS**'s GPG instance home directory, used to
store keyrings and other GPG configuration files.

Out of process bulk uploading
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
A management command has been added to help upload a large number of documents
from a compressed file.  The command line options for this feature are as
follow::

  $ ./manage.py bulk_upload --noinput --metadata '{"project": "bulk"}' --document_type "Accounting documents" compressed.zip 

**Optional arguments**

* The ``--noinput`` argument skips confirmation and starts the upload immediately.
* The ``--metadata`` argument allows specifing what metadata will be assigned
  to the documents when uploaded.
* And the ``--document_type`` applies a previously defined 
  document type to the uploaded documents.
  
Out of process user import
~~~~~~~~~~~~~~~~~~~~~~~~~~
A management command has been added to import a large number users
from a CSV file.  The command line options for this feature are as
follow::

  $ ./manage.py import_users --noinput --password=welcome123 --skip-repeated user_list.csv 

**Optional arguments**

* The ``--noinput`` argument skips confirmation and starts the import immediately.
* The ``--password`` argument allows specifing what default password will be assigned
  to all the new users that are imported.
* The ``--skip-repeated`` tells the importedr to not stop when finding
  that a user already exists in the database.


Upgrading from a previous version
=================================

::

    $ ./manage.py syncdb
    $ ./manage.py migrate permissions 0001 --fake
    $ ./manage.py migrate permissions


When the following message appears

.. epigraph::
    The following content types are stale and need to be deleted:

        permissions | permission

    Any objects related to these content types by a foreign key will also
    be deleted. Are you sure you want to delete these content types?
    If you're unsure, answer 'no'.

        Type 'yes' to continue, or 'no' to cancel:
    
    Types ``yes`` and press **Enter**

::

    $ ./manage.py migrate documents
    $ ./manage.py migrate document_signatures


Backward incompatible changes
=============================
The permission system has been completely reworked so sadly this is a
place where even data migration can't help and the permissions assigned
to roles will be lost during the upgrade to version 0.12.  Users, groups
and roles will be preserved only permissions need to be assigned again,
so write down your role permission setup before upgrading.

Bugs fixed
==========
* Issue #17, special thanks to Dave Herring for all the help including
  access to a machine suffering with the issue.
* Statistics fixes.
* Fixed get_image_cache_name regression in the OCR app.

Stuff removed
=============
* Removal of the OCR_CACHE_URI configuration option.
* Support for Celery and Sentry has been drop
  for now.
* Removed the 'db_index' argument from Text fields definition and 
  migrations as it was causing error messages for MySQL users, thanks to
  Сергей Глита for reporting this one.
