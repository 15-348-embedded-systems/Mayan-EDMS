=============================
Mayan EDMS v2.5 release notes
=============================

Released: July XX, 2017

What's new
==========


Other Changes
-------------
- Add view to download a document's OCR text. GitLab issue #215.
- Add missing OCR migration.
- Improve error output of the performupgrade command to debug upgrade errors
  that could stop an upgrade (missing document files, etc).
- Enable the django-mathfilters app added in version 2.4.
- Do a complete pull and synchronization of the translations to fix missing
  translations for Polish. Thanks to Wojtek Warczakowski for the report.
- Allow null for the SANE source resolution field. Even though the field was
  marked as allowing blank values it was failing because it is a number field
  and number fields need to allow explicit null values when left blank.
- Rename the mayan_task_manager app to task_manager.
- Make the task manager translatable.
- Add Turkish to the list of processes languages.
- Add user configurable mailer support. GitLab issue #286.
- Use Toastr libary for screen messages.
- Reduce verbosity of some debug messages.
- New lineart transformation. Useful to increase the OCR accuracy on some kind
  of documents.
- Make sure lookup selection widgets also trigger the metadata update
  checkbox on change.
- Menu reorganization. The "About" menu has been renamed to "System". The
  "Tools" and "Setup" sub menus, were moved from the "Profile" menu to the
  "System" menu. The "Profile" menu has been renamed to "User".
- Usability improvements on small displays.
- Removal of the CONVERTER_LIBREOFFICE_PATH and CONVERTER_PDFTOPPM_PATH
  settings. These setting have been consolidated into
  CONVERTER_GRAPHICS_BACKEND_CONFIG.
- PDF compatibility improvements.
- Improve the documentation of the document creation API endpoint.
  GitHub issue #255. Thanks to @lcerliani opening the issue.
- Libre Office conversion improvements. Give every libreoffice instance
  its own separate $HOME directory. Additionally give every libreoffice
  its own UserInstallation file in the $HOME directory. Works around
  Libre Office issue: https://bugs.documentfoundation.org/show_bug.cgi?id=37531
  Solves or affects GitLab issues #393 #258 #198 #175
- Document type-metadata type relationship. Add new UI method to switch between
  required metadata and optional metadata for a document type. This new
  method does not forces users to remove a metadata type before making the
  switch and thus avoid deletion of existing metadata entries. GitLab issue #337.
- It is now possible to change the relationship between metadata types and
  document types from either the metadata type list or document type list.
  GitLab issue #373.
- Add support to search documents by their checksums.
- The document checksum field is now indexed for faster searches by checksum.
- Add support for duplicated document scanning. Every time a document is
  uploaded, a document scan will be triggered to determine if the new document
  is a duplicate of an existing document. Duplicate documents will be listed
  in a new "Duplicated documents" link in the main menu. A full document list
  scan can also be triggered by using the new "Duplicated document scan" button
  in the tools menu. Finally a new tab in the document view has been added
  called "Duplicates" that will list all duplicates of the currently
  selected document.
- Add "Remember me" checkbox in the login form.
- Add AUTHENTICATION_MAXIMUM_SESSION_LENGTH configuration setting for the maximum
  time an user's login session will remain valid. Defaults to 30 days.
- Ability to disable the document page image caching. This feature is controlled
  by two new settings: DOCUMENTS_DISABLE_TRANSFORMED_IMAGE_CACHE and 
  DOCUMENTS_DISABLE_BASE_IMAGE_CACHE. DOCUMENTS_DISABLE_BASE_IMAGE_CACHE
  disables the first layer of caching, the generation of a master image file
  for each document page. This means that subsequent request for a page's
  image will trigger the conversion of the document from its original
  uploaded file. The second option, DOCUMENTS_DISABLE_TRANSFORMED_IMAGE_CACHE,
  disables just the caching of the transformed (rotated, resized, zoomed)
  images of document pages. The settings can be used together or separately 
  depending on how much disk space saving is desired. These settings give control
  over the trade-off between disk space savings and higher CPU utilization.
- The trashed document deletion action is now a background task. This
  feature results is much faster trashed document deletion and trash
  can emptying.
- Remove animated spinners to lower browser memory usage and increase
  responsiveness.
- Render a document page place holder while the real document page
  loads. This change avoids "jumping" effect when loading many thumbnails.
- Increase lazy load thresholds. More thumbnails and document pages
  will be loaded and visible by default when a view loads.

Removals
--------
* None

Upgrading from a previous version
---------------------------------

Using PIP
~~~~~~~~~

Type in the console::

    $ pip install -U mayan-edms

the requirements will also be updated automatically.

Using Git
~~~~~~~~~

If you installed Mayan EDMS by cloning the Git repository issue the commands::

    $ git reset --hard HEAD
    $ git pull

otherwise download the compressed archived and uncompress it overriding the
existing installation.

Next upgrade/add the new requirements::

    $ pip install --upgrade -r requirements.txt

Common steps
~~~~~~~~~~~~

Migrate existing database schema with::

    $ mayan-edms.py performupgrade

Add new static media::

    $ mayan-edms.py collectstatic --noinput

The upgrade procedure is now complete.


Backward incompatible changes
=============================

* None

Bugs fixed or issues closed
===========================

* `GitHub issue #255 <https://github.com/mayan-edms/mayan-edms/issues/255>`_ Uploading a local file via api
* `GitLab issue #215 <https://gitlab.com/mayan-edms/mayan-edms/issues/215>`_ Download text contents
* `GitLab issue #286 <https://gitlab.com/mayan-edms/mayan-edms/issues/286>`_ User configurable mailer
* `GitLab issue #337 <https://gitlab.com/mayan-edms/mayan-edms/issues/337>`_ Better way to switch Optional to Required Metadata
* `GitLab issue #373 <https://gitlab.com/mayan-edms/mayan-edms/issues/373>`_ (feature request) Allow selecting document types for metadata

.. _PyPI: https://pypi.python.org/pypi/mayan-edms/
